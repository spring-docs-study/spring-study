# 스프링 부트와 스프링 MVC 를 이용한 웹 앱 구현

## 8.1 동적 뷰를 사용한 웹 앱 구현

> 그림 8-1 동적 뷰, 요청된 웹 페이지는 동일하더라도 웹 페이지가 가진 정보는 다르다. (ex 뉴스)
> ![그림 8-1.jpg](\김민섭\springsutdy\src\main\resources\md파일\스터디 4회\그림 8-1.jpg)


> 그림 8-2 클라이언트는 HTTP 요청으로 데이터를 전송한다. 백엔드는 데이터를 처리하고 응답을 생성하여 클라이언트에 재전송한다. 백엔드의 데이터 처리 방식에 따라 다양한 요청에 대한 다른 데이터가 사용자에게 표시될 수 있다.
> ![그림 8-2.jpg](\김민섭\springsutdy\src\main\resources\md파일\스터디 4회\그림 8-2.jpg)


1. 클라이언트가 웹 서버에 HTTP 요청을 보낸다.
2. 디스패처 서블릿은 핸들러 매핑을 사용하여 호출할 컨트롤러 액션을 찾는다.
3. 디스패처 서블릿은 컨트롤러의 액션을 호출한다.
4. HTTP 요청과 연관된 액션을 실행한 후 컨트롤러는 디스패처 서블릿이 HTTP 응답으로 렌더링하는 데 필요한 뷰 이름을 HTTP 응답으로 반환한다.
5. 응답은 클라이언트로 재전송된다.


> 그림 8-3 스프링 MVC 흐름도
> ![그림 8-3.jpg](\김민섭\springsutdy\src\main\resources\md파일\스터디 4회\그림 8-3.jpg)


### 8.1.1 HTTP 요청에서 데이터 얻기

클라이언트가 HTTP 요청으로 서버에 데이터를 전송하는 방법
 - HTTP 요청 매개변수
   - 키-값 쌍으로 된 형식으로 클라이언트에서 서버로 값을 전송하는 간단한 방식을 나타낸다. HTTP 요청 매개변수를 보내려면 요청 쿼리 표현식의 URI에 매개변수를 추가한다. 쿼리 매개변수라고도 한다. (소량의 데이터 전송 시에만 사용)
 - HTTP 요청 헤더
   - 요청 헤더가 HTTP 헤더로 전송된다는 점에서 요청 매개변수와 유사하다. 가장 큰 차이점은 URI에 표시되지 않는다. (소량의 데이터 전송 시에만 사용)
 - 경로 변수
   - 요청 경로 자체를 이용하여 게이터를 전송한다. 요청 매개변수 접근 방식과 동일하게 경로 변수를 사용하여 소량의 데이터를 전송한다. 하지만 전송하는 값이 필수일 때는 경로 변수를 사용해야 한다.
 - HTTP 요청 본문
   - 주로 대량의 데이터를 전송하는 데 사용된다.


## 8.1.2 클라이언트에서 서버로 데이터를 전송하려고 요청 매개변수 사용

클라이언트에서 백엔드로 데이터를 전송하는 방법 HTTP 요청 매개변수 사용
 - 전송하는 데이터양이 많지 않을 때
   - 쿼리 변수를 사용하여 요청 매개변수를 설정하며, 이 방식은 약 2000자로 제한된다.
 - 필수가 아닌 데이터를 보내야 할 때
   - 요청 매개변수는 클라이언트가 보내지 않아도 되는 값을 처리하는 깔끔한 방식이다. 서버는 특정 요청 매개변수에 대한 값을 전달받지 못할 수도 있다.

요청 매개변수는 검색 및 필터링할 때 자주 사용
> 그림 8-5 
>  ![그림 8-5.jpg](\김민섭\springsutdy\src\main\resources\md파일\스터디 4회\그림 8-5.jpg)

> 그림 8-6 매개변수 값이 클라이언트에서 백엔드의 컨트롤러 액션으로 이동하여 뷰에서 사용되는 과정, 컨트롤러 액션은 클라이언트가 전송한 요청 매개변수를 수신하고 사용할 수 있다.
>  ![그림 8-6.jpg](\김민섭\springsutdy\src\main\resources\md파일\스터디 4회\그림 8-6.jpg)

키=값 에서 '키'는 요청 매개변수 이름이며 그 값은 =기호 오른편에 기입한다.

> 그림 8-7 요청 매개변수 구문
> ![그림 8-7.jpg](\김민섭\springsutdy\src\main\resources\md파일\스터디 4회\그림 8-7.jpg)

### 8.1.3 경로 변수로 클라이언트에서 서버로 데이터 전송

더 이상 키로 값을 식별하지 않는다. 경로의 정확한 위치에서 해당 값을 가져오기만 하면 된다. 서버 측에서는 특정 위치의 경로에서 해당 값을 추출한다. 경로 변수로 값 두 개를 제공할 수 있지만, 일반적으로 복수 값은 사용하지 않는 편이 좋다. 경로 변수를 둘 이상 사용하면 경로 읽기가 더 어렵다는 것을 알 수 있는데 복수 값이 필요하다면 경로 변수 대신 요청 매개변수를 사룔하는 편이 좋다. 또 비필수 매개변수라면 경ㄹ변수를 사용햐소는 안 되며, 필수 매개변수에만 경로 변수를 사용하는 편이 좋다. HTTP 요청에 전송할 값이 필수가 아니라면 요청 매개변수를 사용해야 하낟.


- 경로 변수는 URL 경로의 일부로 포함되어 서버로 전달되는 데이터를 말합니다. 이는 주로 RESTful API에서 특정 리소스를 식별하거나 작업을 수행하는 데 사용됩니다.

> 표 8-1 요청 매개변수와 경로 변수 방식의 비교
> ![표 8-1.jpg](\김민섭\springsutdy\src\main\resources\md파일\스터디 4회\표 8-1.jpg)

> 그림 8-8 경로 변수 사용
> ![그림 8-8.jpg](\김민섭\springsutdy\src\main\resources\md파일\스터디 4회\그림 8-8.jpg)

## 8.2 HTTP GET 과 POST 메서드 사용

HTTP 메서드를 설명하고 클라이언트가 이 메서드를 사용하여 요청 리소스에 적용할 액션을 표현하는 방법
 - 경로와 동사는 HTTP요청을 식별하는데 사용된다.

HTTP 메서드는 동사로 정의되며 클라이언트 의도를 나타낸다. 클라이언트 요청이 데이터만 검색하면 HTTP GET 으로 엔드포인트를 구현한다. 그러나 클라이언트 요청이 서버 측 데이터를 변경할 때는 다른 동사를 사용하여 클라이언트 의도를 명확하게 표현한다.

> 표 8-2 웹 앱 에서 자주 사용하게 될 기본 HTTP 메서드
> ![표 8-2.jpg](\김민섭\springsutdy\src\main\resources\md파일\스터디 4회\표 8-2.jpg)

>그림 8-9 HTTP 메서드 : 데이터를 조회하는 데 GET, 저장하는데 POST, 레코드 변경하는데 PUT, 레코드 일부를 변경하는데 PATCH 데이터를 삭제하는데 DELETE 를 사용하며 클라이언트는 특정 요청으로 실행된 액션을 표현하는데 적절한 HTTP 메서드를 사용해야 한다.
> ![그림 8-9.jpg](\김민섭\springsutdy\src\main\resources\md파일\스터디 4회\그림 8-9.jpg)


> 그림 8-10 HTTP GET/products 를 호출하면 컨트롤러는 서비스에 제품 목록을 받아 뷰로 전송한다. HTTP 응답에는 목록 제품이 포함된 HTTP 테이블이 포함된다.
> ![그림 8-10.jpg](\김민섭\springsutdy\src\main\resources\md파일\스터디 4회\그림 8-10.jpg)


> 그림 8-11 사용자는 웹 페이지의 HTML 표에서 제품들을 보고 HTML 폼을 이용해서 새 재품을 추가할 수 있다.
> ![그림 8-11.jpg](\김민섭\springsutdy\src\main\resources\md파일\스터디 4회\그림 8-11.jpg)


## 8.3 요약

- 웹 앱은 동적 페이지를 지원하며, 동적 페이지는 요청에 따라 다른 콘텐츠를 표시할 수 있다.
- 동적 뷰는 표시할 정보를 알려고 컨트롤러에서 변수 데이터를 가져온다.
- 스프링 앱에서 동적 페이지를 구현하는 쉬운 방법은 타임리프 같은 템플릿 엔진을 사용하는 것이다. 타임리프의 대안으로는 머스태치, 프리마커, 자바 서버 페이지가 있다.
- 템플릿 엔진은 컨트롤러가 전송하는 데이터를 쉽게 가져와서 뷰에 표시할 수 있는 기능을 앱에 제공하는 의존성이다.
- 클라이언트는 요청 매개변수를 이용하여 서버로 데이터를 보냘 수 있다. 컨트롤러의 액션은 클라이언트가 보내는 세부 정보를 @RequestParam 또는 @PathVariable 애너테이션이 달린 매개변수로 가져온다.
- 요청 매개변수는 필수 변수가 아닐 수 있다.
- 클라이언트가 전송하는 필수 데이터에 대해 경로 변수를 사용해야만 한다.
- 경로와 HTTP 메서드로 HTTP 요청을 식별한다. HTTP메서드는 클라이언트 의도를 식별하는 동사로 표시된다. 프로덕션 앱에서 자주 볼 수 있는 필수 HTTP 메서드는 GET, POST, PUT, PATCH, DELETE 다.
  - GET은 백엔드에서 데이터를 변경하지 않고 데이터를 조회하려는 클라이언트 의도를 표현한다.
  - POST는 서버 측에 새 데이터를 추가하려는 클라이언트 의도를 표현한다.
  - PUT은 백엔드에서 데이터 레코드를 완전히 변경하려는 클라이언트 의도를 표현한다.
  - PATCH은 백엔드에서 데이터 레코드를 일부를 변경하려는 클라이언트 의도를 표현한다.
  - DELETE는 백엔드에서 데이터를 제거하려는 클라이언트 의도를 표현한다.
- 웹 브라우저의 HTML 폼 프로세스를 이용하여 HTTP GET과 HTTP POST 만 사용 가능하다. DELETE 또는 PUT 같은 HTTP 메서드를 사용하려면 자바스크립트와 같은 클라이언트 언어로 호출을 구현해야한다.
